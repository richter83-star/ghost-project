services:
  - type: web
    name: ghostsystems
    env: node
    plan: free              # or starter / pro if you upgrade later
    rootDir: ./GhostSystems # Points to the GhostSystems directory where package.json and application code are located
    buildCommand: npm install
    startCommand: npm start
    autoDeploy: true
    envVars:
      - key: NODE_ENV
        value: production
      - key: GHOST_MODE
        value: learning
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_SERVICE_KEY
        sync: false
      - key: GUMROAD_API_KEY
        sync: false
      - key: GUMROAD_WEBHOOK_SECRET
        sync: false
      - key: LEMONSQUEEZY_API_KEY
        sync: false
      - key: LEMONSQUEEZY_STORE_ID
        sync: false
      - key: NOTION_API_KEY
        sync: false
      - key: NOTION_DB_PRODUCTS_ID
        sync: false
      # Shopify configuration (standardized)
      - key: SHOPIFY_STORE_URL
        value: dracanus-ai.myshopify.com
        sync: false
      - key: SHOPIFY_ADMIN_API_TOKEN
        sync: false
      - key: SHOPIFY_API_VERSION
        value: 2025-01
        sync: false
      - key: SHOPIFY_WEBHOOK_SECRET
        sync: false
      # Firebase (required for listeners)
      - key: FIREBASE_SERVICE_ACCOUNT_JSON
        sync: false
      # Gemini AI (for content generation)
      - key: GEMINI_API_KEY
        sync: false
      - key: GEMINI_MODEL
        value: gemini-2.5-flash-preview-09-2025
        sync: false
      # Email service (Resend - for digital goods delivery)
      - key: RESEND_API_KEY
        sync: false
      - key: FROM_EMAIL
        sync: false
      # Firestore collection name
      - key: FIRESTORE_JOBS_COLLECTION
        value: products
        sync: false
      # Shopify pipeline rate limiting (optional, defaults to 2000ms = 2 seconds between products)
      - key: SHOPIFY_PIPELINE_DELAY_MS
        value: 2000
        sync: false

  # Optional background cron-runner (comment out if not needed)
  # All functionality is now in the main web service (ghostsystems)
  # - type: worker
  #   name: ghostsystems-cron
  #   env: node
  #   rootDir: ./
  #   buildCommand: npm install
  #   startCommand: npm start
  #   autoDeploy: true

